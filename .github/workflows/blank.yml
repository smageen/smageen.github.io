name: Import Packix Repo

on:
  workflow_dispatch:

jobs:
  import:
    runs-on: ubuntu-latest
    steps:
      - name: ⏳ Start
        run: echo "🔄 Обработка repo.packix.com.7z"

      - name: 📥 Download
        run: curl -L "https://archive.org/download/cydia_repository_archive/repo.packix.com.7z" -o "packix.7z"

      - name: 📂 Extract
        run: |
          sudo apt-get update
          sudo apt-get install -y p7zip-full
          mkdir -p repo/debs
          7z x "packix.7z" -orepo/debs
          rm "packix.7z"

      - name: 📊 Disk usage
        run: df -h

      - name: 📦 Upload
        uses: actions/upload-artifact@v4
        with:
          name: packix-debs
          path: repo/debs

      - name: ✅ Done
        run: echo "✅ Packix архив обработан"
